# 野火IMX6 SDK

## uboot编译

```bash
book@100ask:~/embdefire$ cd ebf_6ull_uboot/

book@100ask:~/embdefire/ebf_6ull_uboot$ make distclean 
1. nand版本配置：
book@100ask:~/embdefire/ebf_6ull_uboot$ make mx6ull_14x14_evk_nand_defconfig
2. emmc版本配置：
book@100ask:~/embdefire/ebf_6ull_uboot$ make mx6ull_14x14_evk_emmc_defconfig
3. sd卡版本配置：
book@100ask:~/embdefire/ebf_6ull_uboot$ make mx6ull_14x14_evk_defconfig
book@100ask:~/embdefire/ebf_6ull_uboot$ make -j4

```





## 编译内核

```bash
执行以下命令安装lzop工具
book@100ask:~/embdefire/ebf_6ull_linux$ sudo apt-get install lzop
book@100ask:~/embdefire$ cd ebf_6ull_linux/
book@100ask:~/embdefire/ebf_6ull_linux$ make  clean
book@100ask:~/embdefire/ebf_6ull_linux$ make imx6_v7_ebf_defconfig
book@100ask:~/embdefire/ebf_6ull_linux$ make -j10 
book@100ask:~/embdefire/ebf_6ull_linux$ make -j10 dtbs
内核镜像路径：ebf_6ull_linux/arch/arm/boot
设备树输出路径：ebf_6ull_linux/arch/arm/boot/dts

执行./copy.sh脚本拷贝内核和设备树到book@100ask:~/embdefire/ebf_6ull_linux/image目录下，
book@100ask:~/embdefire/ebf_6ull_linux$ ./copy.sh
book@100ask:~/embdefire/ebf_6ull_linux$ cd image/
book@100ask:~/embdefire/ebf_6ull_linux/image$ ls
imx6ull-14x14-evk.dtb
imx6ull-14x14-evk-emmc-43.dtb
imx6ull-14x14-evk-emmc-cam-dht11.dtb
imx6ull-14x14-evk-emmc.dtb
imx6ull-14x14-evk-emmc-hdmi.dtb
imx6ull-14x14-evk-emmc-wifi.dtb
imx6ull-14x14-evk-gpmi-weim-43.dtb
imx6ull-14x14-evk-gpmi-weim-cam-dht11.dtb
imx6ull-14x14-evk-gpmi-weim-hdmi.dtb
imx6ull-14x14-evk-gpmi-weim-wifi.dtb
zImage
 

```

## 编译文件系统

```shell
book@100ask:~/embdefire$ cd ebf_6ull_buildroot/
book@100ask:~/embdefire/ebf_6ull_buildroot$ make clean
book@100ask:~/embdefire/ebf_6ull_buildroot$ make imx6ull_ebf_pro_defconfig
book@100ask:~/embdefire/ebf_6ull_buildroot$ make menuconfig
book@100ask:~/embdefire/ebf_6ull_buildroot$ make savedefconfig
book@100ask:~/embdefire/ebf_6ull_buildroot$ make 

生成的镜像文件在book@100ask:~/embdefire/ebf_6ull_buildroot/output/images/ 目录下
book@100ask:~/embdefire/ebf_6ull_buildroot/output/images$ ll
total 1097656
drwxr-xr-x 2 book book      4096 Nov 15 04:50 ./
drwxr-xr-x 6 book book      4096 Nov 15 04:50 ../
-rw-r--r-- 1 book book  16777216 Nov 15 04:50 boot.vfat
-rw-r--r-- 1 book book     41031 Nov 15 04:49 imx6ull-14x14-evk-btwifi.dtb
-rw-r--r-- 1 book book     40494 Nov 15 04:49 imx6ull-14x14-evk.dtb
-rw-r--r-- 1 book book     40618 Nov 15 04:49 imx6ull-14x14-evk-emmc-43.dtb
-rw-r--r-- 1 book book     40618 Nov 15 04:49 imx6ull-14x14-evk-emmc-cam-dht11.dtb
-rw-r--r-- 1 book book     40618 Nov 15 04:49 imx6ull-14x14-evk-emmc.dtb
-rw-r--r-- 1 book book     40618 Nov 15 04:49 imx6ull-14x14-evk-emmc-hdmi.dtb
-rw-r--r-- 1 book book     41155 Nov 15 04:49 imx6ull-14x14-evk-emmc-wifi.dtb
-rw-r--r-- 1 book book     40494 Nov 15 04:49 imx6ull-14x14-evk-gpmi-weim-43.dtb
-rw-r--r-- 1 book book     40494 Nov 15 04:49 imx6ull-14x14-evk-gpmi-weim-cam-dht11.dtb
-rw-r--r-- 1 book book     40494 Nov 15 04:49 imx6ull-14x14-evk-gpmi-weim-hdmi.dtb
-rw-r--r-- 1 book book     41031 Nov 15 04:49 imx6ull-14x14-evk-gpmi-weim-wifi.dtb
-rw-r--r-- 1 book book  96920576 Nov 15 04:50 rootfs.cpio
-rw-r--r-- 1 book book  44512562 Nov 15 04:50 rootfs.cpio.gz
-rw-r--r-- 1 book book  44512626 Nov 15 04:50 rootfs.cpio.uboot
-rw-r--r-- 1 book book 536870912 Nov 15 04:50 rootfs.ext2
lrwxrwxrwx 1 book book        11 Nov 15 04:50 rootfs.ext4 -> rootfs.ext2
-rw-r--r-- 1 book book 107243520 Nov 15 04:50 rootfs.tar
-rw-r--r-- 1 book book  63832064 Nov 15 04:50 rootfs.ubi
-rw-r--r-- 1 book book  62576640 Nov 15 04:50 rootfs.ubifs
-rw-r--r-- 1 book book 562036736 Nov 15 04:50 sdcard.img
-rw-r--r-- 1 book book    351232 Nov 15 04:41 u-boot.imx
-rw-r--r-- 1 book book   6349896 Nov 15 04:49 zImage


```

## 编译qt

### 安装的SDK

执行如下命令安装qt5的交叉编译工具链：
```bash
./fsl-imx-x11-glibc-x86_64-meta-toolchain-qt5-cortexa7hf-neon-toolchain-4.1.15-2.1.0.sh
```

选择默认设置，安装完成后，会在/opt/fsl-imx-x11/4.1.15-2.1.0/目录下生成我们所需要的工具链。

**注意**：每次打开终端时，都需要执行以下命令设置环境变量：

```bash
source /opt/fsl-imx-x11/4.1.15-2.1.0/environment-setup-cortexa7hf-neon-poky-linux-gnueabi 
```

输入命令
```bash
qmake -v 
```

若环境变量设置正确，则会出现以下信息

```bash
embedfire@dev1:~$ qmake -v
QMake version 3.0
Using Qt version 5.6.2 in /opt/fsl-imx-x11/4.1.15-2.1.0/sysroots/cortexa7hf-neon-poky-linux-gnueabi/usr/lib
```

> 以上是验证SDK安装是否成功！！

### 下载qt源码

```bash
git clone https://github.com/Embdefire/ebf_linux_qt_demo.git
```
### 编译

```bash
./build.sh
```

如果`build.sh`不是可执行文件，可以使用以下命令添加可执行权限

```bash
chmod +x build.sh
```

### 输出

在当前目录下会创建一个`run_dir`目录，存在`App  libqui  libskin`文件，App是可以直接在开发板上运行的！
与此同时，还会打包一个`fire-app-xxxx.tar.bz2`文件，大家可以拷贝到对应的目录下解压替换掉旧的`App`。

5.清除相关内容

```bash
make distclean
```

## 烧录



待续